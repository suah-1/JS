<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹œí—˜ ê²°ê³¼</title>
    <link rel="stylesheet" href="result.css">
    <style>
        /* ë¡œê·¸ì¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .loginbutton {
            font-size: 24px; /* ê¸€ì í¬ê¸° */
            padding: 20px 40px; /* ë²„íŠ¼ ì•ˆì˜ ì—¬ë°±ì„ ë” í¬ê²Œ ì„¤ì • */
            background-color: #4CAF50; /* ë²„íŠ¼ ë°°ê²½ìƒ‰ */
            color: white; /* ê¸€ì ìƒ‰ */
            border: none; /* í…Œë‘ë¦¬ ì œê±° */
            border-radius: 8px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            cursor: pointer; /* ë§ˆìš°ìŠ¤ ì»¤ì„œ ëª¨ì–‘ */
            width: 250px; /* ë²„íŠ¼ ë„ˆë¹„ */
            margin-bottom: 20px; /* ë²„íŠ¼ ì•„ë˜ ì—¬ë°± */
            transition: background-color 0.3s ease; /* ë°°ê²½ìƒ‰ ë³€í™”ì— ë¶€ë“œëŸ¬ìš´ íš¨ê³¼ */
            text-align: center; /* í…ìŠ¤íŠ¸ ê°€ìš´ë° ì •ë ¬ */
        }

        .loginbutton:hover {
            background-color: #d; /* í˜¸ë²„ ì‹œ ë°°ê²½ìƒ‰ ë³€í™” */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="userì‚¬ìš©ì-name">ì‚¬ìš©ììë‹˜</h1>
        <P>ê° ë¬¸ì œë¥¼ í´ë¦­í•˜ì—¬ í’€ì´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</P>

        <button class="loginbutton" onclick="login()" style="margin-bottom: 20px;">
            ë¡œê·¸ì¸í•˜ê¸°
        </button>

        <!-- ì •ë‹µ ë¦¬ìŠ¤íŠ¸ -->
        <h2>âœ… ì •ë‹µ ë¦¬ìŠ¤íŠ¸</h2>
        <div id="correct-list"></div>

        <!-- ì˜¤ë‹µ ë¦¬ìŠ¤íŠ¸ -->
        <h2>âŒ ì˜¤ë‹µ ë¦¬ìŠ¤íŠ¸</h2>
        <div id="incorrect-list"></div>

        <button class="retrybutton" onclick="retryExam()" style="margin-top: 20px;">ë‹¤ì‹œ ì‹œí—˜ ë³´ê¸°</button>

        <button class="homebutton" onclick="home()"><svg xmlns="http://www.w3.org/2000/svg" height="50px"
            viewBox="0 -960 960 960" width="50px" fill="#5f6368">
            <path d="M160-120v-480l320-240 320 240v480H560v-280H400v280H160Z" />
        </svg></button>
    </div>

    <script>
        function home() {
            window.location.href = "name.html";
        }
        // ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ name.htmlë¡œ ì´ë™
        function login() {
            window.location.href = "name.html";
        }


        // ì €ì¥ëœ ê²°ê³¼ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        const results = JSON.parse(localStorage.getItem("examResults") || "[]");

        const correctList = document.getElementById("correct-list");
        const incorrectList = document.getElementById("incorrect-list");

        if (results.length === 0) {
            correctList.innerHTML = "<p>ì •ë‹µì´ ì—†ìŠµë‹ˆë‹¤.</p>";
            incorrectList.innerHTML = "<p>ì˜¤ë‹µì´ ì—†ìŠµë‹ˆë‹¤.</p>";
        }

        results.forEach((result, index) => {
            const listItem = document.createElement("div");
            listItem.className = "question-item";

            // solutionì´ undefinedì¼ ê²½ìš° ëŒ€ë¹„
            const solutionText = result.solution ? result.solution : "í’€ì´ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.";

            listItem.innerHTML = `
                <strong>${index + 1}. ${result.question}</strong>
                <p>âœ… ì •ë‹µ: ${result.correctAnswer}</p>
                <p>ğŸ“ ë‚´ ë‹µ: ${result.selectedAnswer}</p>
                <div class="solution" id="solution-${index}">
                    <p>ğŸ’¡ í’€ì´: ${solutionText}</p>
                </div>
            `;

            listItem.addEventListener("click", () => toggleSolution(index, listItem));

            if (result.isCorrect) {
                correctList.appendChild(listItem);
            } else {
                incorrectList.appendChild(listItem);
            }
        });

        // í’€ì´ ì•„ì½”ë””ì–¸ ê¸°ëŠ¥
        function toggleSolution(index, element) {
            const solutionDiv = document.getElementById(`solution-${index}`);
            const isVisible = solutionDiv.style.display === "block";

            // ëª¨ë“  í’€ì´ ë‹«ê¸°
            document.querySelectorAll(".solution").forEach(div => div.style.display = "none");
            document.querySelectorAll(".question-item").forEach(item => item.classList.remove("active"));

            // í´ë¦­í•œ ë¬¸ì œì˜ í’€ì´ë§Œ ì—´ê¸°/ë‹«ê¸°
            if (!isVisible) {
                solutionDiv.style.display = "block";
                element.classList.add("active");
            }
        }

        // ë‹¤ì‹œ ì‹œí—˜ ë³´ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ select.htmlë¡œ ì´ë™
        function retryExam() {
            localStorage.removeItem("examResults"); // ì´ì „ ê²°ê³¼ ì‚­ì œ
            window.location.href = "select.html";
        }
    </script>
</body>

</html>